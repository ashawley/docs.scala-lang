<!DOCTYPE html>
<html>
  <head>
    <title>Annotations, Names, Scopes, and More | Scala Documentation</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" type="image/png" href="/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/favicon-16x16.png">
    <link rel="manifest" href="/resources/site.webmanifest">
    <link rel="mask-icon" href="/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="/resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>


<div class="navigation-fade-screen"></div>

<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="/resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="/" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>
<header id="doc-header">
  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      <a href="/" class="navigation-bdand">
        <img src="/resources/img/documentation-logo@2x.png" alt="">
      </a>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="#" id="api" >API</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="https://www.scala-lang.org/api/current/">Current</a>
                  </li>
                
                  <li>
                    <a href="https://www.scala-lang.org/files/archive/nightly/2.12.x/api/2.12.x/">Nightly</a>
                  </li>
                
                  <li>
                    <a href="/api/all.html">All Versions</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="/getting-started.html">Getting Started</a>
                  </li>
                
                  <li>
                    <a href="/tour/tour-of-scala.html">Tour of Scala</a>
                  </li>
                
                  <li>
                    <a href="/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
                  </li>
                
                  <li>
                    <a href="/learn.html">Online Resources</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="#" id="reference" >Reference</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="/overviews/index.html">Guides & Overviews</a>
                  </li>
                
                  <li>
                    <a href="/books.html">Books</a>
                  </li>
                
                  <li>
                    <a href="/tutorials/FAQ/index.html">Scala FAQs</a>
                  </li>
                
                  <li>
                    <a href="http://scala-lang.org/files/archive/spec/2.12/">Language Spec</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/style/index.html" id="style guide" >Style Guide</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/cheatsheets/index.html" id="cheatsheet" >Cheatsheet</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/glossary/index.html" id="glossary" >Glossary</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/sips/index.html" id="sips" >SIPs</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="api" style="display: none;">
            
              <li>
                <a href="https://www.scala-lang.org/api/current/">Current</a>
              </li>
            
              <li>
                <a href="https://www.scala-lang.org/files/archive/nightly/2.12.x/api/2.12.x/">Nightly</a>
              </li>
            
              <li>
                <a href="/api/all.html">All Versions</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="/getting-started.html">Getting Started</a>
              </li>
            
              <li>
                <a href="/tour/tour-of-scala.html">Tour of Scala</a>
              </li>
            
              <li>
                <a href="/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
              </li>
            
              <li>
                <a href="/learn.html">Online Resources</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="reference" style="display: none;">
            
              <li>
                <a href="/overviews/index.html">Guides & Overviews</a>
              </li>
            
              <li>
                <a href="/books.html">Books</a>
              </li>
            
              <li>
                <a href="/tutorials/FAQ/index.html">Scala FAQs</a>
              </li>
            
              <li>
                <a href="http://scala-lang.org/files/archive/spec/2.12/">Language Spec</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="/style/index.html">Style Guide</a></li>
          
        
          
            <li><a href="/cheatsheets/index.html">Cheatsheet</a></li>
          
        
          
            <li><a href="/glossary/index.html">Glossary</a></li>
          
        
          
            <li><a href="/sips/index.html">SIPs</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">

  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        <div class="titles">
          
            <div class="supertitle">Reflection</div>
          
          <h1>Annotations, Names, Scopes, and More</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box">
				<div class="toc-context">
					<p><span class="label important" style="float: right;">EXPERIMENTAL</span></p>

<h2 id="annotations">Annotations</h2>

<p>In Scala, declarations can be annotated using subtypes of
<code class="highlighter-rouge">scala.annotation.Annotation</code>. Furthermore, since Scala integrates with
<a href="http://docs.oracle.com/javase/7/docs/technotes/guides/language/annotations.html#_top">Java’s annotation system</a>,
it’s possible to work with annotations produced by a
standard Java compiler.</p>

<p>Annotations can be inspected reflectively if the corresponding annotations
have been persisted, so that they can be read from the classfile containing
the annotated declarations. A custom annotation type can be made persistent by
inheriting from <code class="highlighter-rouge">scala.annotation.StaticAnnotation</code> or
<code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code>. As a result, instances of the
annotation type are stored as special attributes in the corresponding
classfile. Note that subclassing just
<code class="highlighter-rouge">scala.annotation.Annotation</code> is not enough to have the corresponding metadata
persisted for runtime reflection. Moreover, subclassing
<code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> does not make your annotation visible
as a Java annotation at runtime; that requires writing the annotation class
in Java.</p>

<p>The API distinguishes between two kinds of annotations:</p>

<ul>
  <li><em>Java annotations:</em> annotations on definitions produced by the Java compiler, <em>i.e.,</em> subtypes of <code class="highlighter-rouge">java.lang.annotation.Annotation</code> attached to program definitions. When read by Scala reflection, the <code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> trait is automatically added as a subclass to every Java annotation.</li>
  <li><em>Scala annotations:</em> annotations on definitions or types produced by the Scala compiler.</li>
</ul>

<p>The distinction between Java and Scala annotations is manifested in the
contract of <code class="highlighter-rouge">scala.reflect.api.Annotations#Annotation</code>, which exposes both
<code class="highlighter-rouge">scalaArgs</code> and <code class="highlighter-rouge">javaArgs</code>. For Scala or Java annotations extending
<code class="highlighter-rouge">scala.annotation.ClassfileAnnotation</code> <code class="highlighter-rouge">scalaArgs</code> is empty and the arguments
(if any) are stored in <code class="highlighter-rouge">javaArgs</code>. For all other Scala annotations, the
arguments are stored in <code class="highlighter-rouge">scalaArgs</code> and <code class="highlighter-rouge">javaArgs</code> is empty.</p>

<p>Arguments in <code class="highlighter-rouge">scalaArgs</code> are represented as typed trees. Note that these trees
are not transformed by any phases following the type-checker. Arguments in
<code class="highlighter-rouge">javaArgs</code> are represented as a map from <code class="highlighter-rouge">scala.reflect.api.Names#Name</code> to
<code class="highlighter-rouge">scala.reflect.api.Annotations#JavaArgument</code>. Instances of <code class="highlighter-rouge">JavaArgument</code>
represent different kinds of Java annotation arguments:</p>

<ul>
  <li>literals (primitive and string constants),</li>
  <li>arrays, and</li>
  <li>nested annotations.</li>
</ul>

<h2 id="names">Names</h2>

<p>Names are simple wrappers for strings.
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Names$NameApi.html">Name</a>
has two subtypes <code class="highlighter-rouge">TermName</code> and <code class="highlighter-rouge">TypeName</code> which distinguish names of terms (like
objects or members) and types (like classes, traits, and type members). A term
and a type of the same name can co-exist in the same object. In other words,
types and terms have separate name spaces.</p>

<p>Names are associated with a universe. Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala&gt; val mapName = TermName("map")
mapName: scala.reflect.runtime.universe.TermName = map
</code></pre></div></div>

<p>Above, we’re creating a <code class="highlighter-rouge">Name</code> associated with the runtime reflection universe
(this is also visible in its path-dependent type
<code class="highlighter-rouge">reflect.runtime.universe.TermName</code>).</p>

<p>Names are often used to look up members of types. For example, to search for
the <code class="highlighter-rouge">map</code> method (which is a term) declared in the <code class="highlighter-rouge">List</code> class, one can do:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; val listTpe = typeOf[List[Int]]
listTpe: scala.reflect.runtime.universe.Type = scala.List[Int]

scala&gt; listTpe.member(mapName)
res1: scala.reflect.runtime.universe.Symbol = method map
</code></pre></div></div>

<p>To search for a type member, one can follow the same procedure, using
<code class="highlighter-rouge">TypeName</code> instead. It is also possible to rely on implicit conversions to
convert between strings and term or type names:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; listTpe.member("map": TermName)
res2: scala.reflect.runtime.universe.Symbol = method map
</code></pre></div></div>

<h3 id="standard-names">Standard Names</h3>

<p>Certain names, such as “<code class="highlighter-rouge">_root_</code>”, have special meanings in Scala programs. As
such they are essential for reflectively accessing certain Scala constructs.
For example, reflectively invoking a constructor requires using the
<em>standard name</em> <code class="highlighter-rouge">universe.termNames.CONSTRUCTOR</code>, the term name <code class="highlighter-rouge">&lt;init&gt;</code> which represents the
constructor name on the JVM.</p>

<p>There are both</p>

<ul>
  <li><em>standard term names,</em> <em>e.g.,</em> “<code class="highlighter-rouge">&lt;init&gt;</code>”, “<code class="highlighter-rouge">package</code>”, and “<code class="highlighter-rouge">_root_</code>”, and</li>
  <li><em>standard type names,</em> <em>e.g.,</em> “<code class="highlighter-rouge">&lt;error&gt;</code>”, “<code class="highlighter-rouge">_</code>”, and “<code class="highlighter-rouge">_*</code>”.</li>
</ul>

<p>Some names, such as “package”, exist both as a type name and a term name.
Standard names are made available through the <code class="highlighter-rouge">termNames</code> and <code class="highlighter-rouge">typeNames</code> members of
class <code class="highlighter-rouge">Universe</code>. For a complete specification of all standard names, see the
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/StandardNames.html">API documentation</a>.</p>

<h2 id="scopes">Scopes</h2>

<p>A scope object generally maps names to symbols available in a corresponding
lexical scope. Scopes can be nested. The base type exposed in the reflection
API, however, only exposes a minimal interface, representing a scope as an
iterable of <a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Symbols$Symbol.html">Symbol</a>s.</p>

<p>Additional functionality is exposed in <em>member scopes</em> that are returned by
<code class="highlighter-rouge">members</code> and <code class="highlighter-rouge">decls</code> defined in
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Types$TypeApi.html">scala.reflect.api.Types#TypeApi</a>.
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Scopes$MemberScope.html">scala.reflect.api.Scopes#MemberScope</a>
supports the <code class="highlighter-rouge">sorted</code> method, which sorts members <em>in declaration order</em>.</p>

<p>The following example returns a list of the symbols of all overridden members
of the <code class="highlighter-rouge">List</code> class, in declaration order:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; val overridden = listTpe.decls.sorted.filter(_.isOverride)
overridden: List[scala.reflect.runtime.universe.Symbol] = List(method companion, method ++, method +:, method toList, method take, method drop, method slice, method takeRight, method splitAt, method takeWhile, method dropWhile, method span, method reverse, method stringPrefix, method toStream, method foreach)
</code></pre></div></div>

<h2 id="exprs">Exprs</h2>

<p>In addition to type <code class="highlighter-rouge">scala.reflect.api.Trees#Tree</code>, the base type of abstract
syntax trees, typed trees can also be represented as instances of type
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Exprs$Expr.html"><code class="highlighter-rouge">scala.reflect.api.Exprs#Expr</code></a>.
An <code class="highlighter-rouge">Expr</code> wraps
an abstract syntax tree and an internal type tag to provide access to the type
of the tree. <code class="highlighter-rouge">Expr</code>s are mainly used to simply and conveniently create typed
abstract syntax trees for use in a macro. In most cases, this involves methods
<code class="highlighter-rouge">reify</code> and <code class="highlighter-rouge">splice</code> (see the
<a href="/overviews/macros/overview.html">macros guide</a> for details).</p>

<h2 id="flags-and-flag-sets">Flags and flag sets</h2>

<p>Flags are used to provide modifiers for abstract syntax trees that represent
definitions via the <code class="highlighter-rouge">flags</code> field of <code class="highlighter-rouge">scala.reflect.api.Trees#Modifiers</code>.
Trees that accept modifiers are:</p>

<ul>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#ClassDef</code>. Classes and traits.</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#ModuleDef</code>. Objects.</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#ValDef</code>. Vals, vars, parameters, and self type annotations.</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#DefDef</code>. Methods and constructors.</li>
  <li><code class="highlighter-rouge">scala.reflect.api.Trees#TypeDef</code>. Type aliases, abstract type members and type parameters.</li>
</ul>

<p>For example, to create a class named <code class="highlighter-rouge">C</code> one would write something like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ClassDef(Modifiers(NoFlags), TypeName("C"), Nil, ...)
</code></pre></div></div>

<p>Here, the flag set is empty. To make <code class="highlighter-rouge">C</code> private, one would write something
like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ClassDef(Modifiers(PRIVATE), TypeName("C"), Nil, ...)
</code></pre></div></div>

<p>Flags can also be combined with the vertical bar operator (<code class="highlighter-rouge">|</code>). For example,
a private final class is written something like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ClassDef(Modifiers(PRIVATE | FINAL), TypeName("C"), Nil, ...)
</code></pre></div></div>

<p>The list of all available flags is defined in
<code class="highlighter-rouge">scala.reflect.api.FlagSets#FlagValues</code>, available via
<code class="highlighter-rouge">scala.reflect.api.FlagSets#Flag</code>. (Typically, one uses a wildcard import for
this, <em>e.g.,</em> <code class="highlighter-rouge">import scala.reflect.runtime.universe.Flag._</code>.)</p>

<p>Definition trees are compiled down to symbols, so that flags on modifiers of
these trees are transformed into flags on the resulting symbols. Unlike trees,
symbols don’t expose flags, but rather provide test methods following the
<code class="highlighter-rouge">isXXX</code> pattern (<em>e.g.,</em> <code class="highlighter-rouge">isFinal</code> can be used to test finality). In some
cases, these test methods require a conversion using <code class="highlighter-rouge">asTerm</code>, <code class="highlighter-rouge">asType</code>, or
<code class="highlighter-rouge">asClass</code>, as some flags only make sense for certain kinds of symbols.</p>

<p><em>Of note:</em> This part of the reflection API is being considered a candidate
for redesign. It is quite possible that in future releases of the reflection
API, flag sets could be replaced with something else.</p>

<h2 id="constants">Constants</h2>

<p>Certain expressions that the Scala specification calls <em>constant expressions</em>
can be evaluated by the Scala compiler at compile time. The following kinds of
expressions are compile-time constants (see <a href="http://scala-lang.org/files/archive/spec/2.11/06-expressions.html#constant-expressions">section 6.24 of the Scala language specification</a>):</p>

<ol>
  <li>
    <p>Literals of primitive value classes (<a href="http://www.scala-lang.org/api/current/index.html#scala.Byte">Byte</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Short">Short</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Int">Int</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Long">Long</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Float">Float</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Double">Double</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Char">Char</a>, <a href="http://www.scala-lang.org/api/current/index.html#scala.Boolean">Boolean</a> and <a href="http://www.scala-lang.org/api/current/index.html#scala.Unit">Unit</a>) - represented directly as the corresponding type.</p>
  </li>
  <li>
    <p>String literals - represented as instances of the string.</p>
  </li>
  <li>
    <p>References to classes, typically constructed with <a href="http://www.scala-lang.org/api/current/index.html#scala.Predef$@classOf[T]:Class[T]">scala.Predef#classOf</a> - represented as <a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Types$Type.html">types</a>.</p>
  </li>
  <li>
    <p>References to Java enumeration values - represented as <a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Symbols$Symbol.html">symbols</a>.</p>
  </li>
</ol>

<p>Constant expressions are used to represent</p>

<ul>
  <li>literals in abstract syntax trees (see <code class="highlighter-rouge">scala.reflect.api.Trees#Literal</code>), and</li>
  <li>literal arguments for Java class file annotations (see <code class="highlighter-rouge">scala.reflect.api.Annotations#LiteralArgument</code>).</li>
</ul>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Literal(Constant(5))
</code></pre></div></div>

<p>The above expression creates an AST representing the integer literal <code class="highlighter-rouge">5</code> in
Scala source code.</p>

<p><code class="highlighter-rouge">Constant</code> is an example of a “virtual case class”, <em>i.e.,</em> a class whose
instances can be constructed and matched against as if it were a case class.
Both types <code class="highlighter-rouge">Literal</code> and <code class="highlighter-rouge">LiteralArgument</code> have a <code class="highlighter-rouge">value</code> method returning the
compile-time constant underlying the literal.</p>

<p>Examples:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Constant(true) match {
  case Constant(s: String)  =&gt; println("A string: " + s)
  case Constant(b: Boolean) =&gt; println("A Boolean value: " + b)
  case Constant(x)          =&gt; println("Something else: " + x)
}
assert(Constant(true).value == true)
</code></pre></div></div>

<p>Class references are represented as instances of
<code class="highlighter-rouge">scala.reflect.api.Types#Type</code>. Such a reference can be converted to a runtime
class using the <code class="highlighter-rouge">runtimeClass</code> method of a <code class="highlighter-rouge">RuntimeMirror</code> such as
<code class="highlighter-rouge">scala.reflect.runtime.currentMirror</code>. (This conversion from a type to a
runtime class is necessary, because when the Scala compiler processes a class
reference, the underlying runtime class might not yet have been compiled.)</p>

<p>Java enumeration value references are represented as symbols (instances of
<code class="highlighter-rouge">scala.reflect.api.Symbols#Symbol</code>), which on the JVM point to methods that
return the underlying enumeration values. A <code class="highlighter-rouge">RuntimeMirror</code> can be used to
inspect an underlying enumeration or to get the runtime value of a reference
to an enumeration.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Java source:
enum JavaSimpleEnumeration { FOO, BAR }

import java.lang.annotation.*;
@Retention(RetentionPolicy.RUNTIME)
@Target({ElementType.TYPE})
public @interface JavaSimpleAnnotation {
  Class&lt;?&gt; classRef();
  JavaSimpleEnumeration enumRef();
}

@JavaSimpleAnnotation(
  classRef = JavaAnnottee.class,
  enumRef = JavaSimpleEnumeration.BAR
)
public class JavaAnnottee {}

// Scala source:
import scala.reflect.runtime.universe._
import scala.reflect.runtime.{currentMirror =&gt; cm}

object Test extends App {
  val jann = typeOf[JavaAnnottee].typeSymbol.annotations(0).javaArgs

  def jarg(name: String) = jann(TermName(name)) match {
    // Constant is always wrapped in a Literal or LiteralArgument tree node
    case LiteralArgument(ct: Constant) =&gt; value
    case _ =&gt; sys.error("Not a constant")
  }

  val classRef = jarg("classRef").value.asInstanceOf[Type]
  println(showRaw(classRef))         // TypeRef(ThisType(), JavaAnnottee, List())
  println(cm.runtimeClass(classRef)) // class JavaAnnottee

  val enumRef = jarg("enumRef").value.asInstanceOf[Symbol]
  println(enumRef)                   // value BAR

  val siblings = enumRef.owner.typeSignature.decls
  val enumValues = siblings.filter(sym =&gt; sym.isVal &amp;&amp; sym.isPublic)
  println(enumValues)                // Scope {
                                     //   final val FOO: JavaSimpleEnumeration;
                                     //   final val BAR: JavaSimpleEnumeration
                                     // }

  val enumClass = cm.runtimeClass(enumRef.owner.asClass)
  val enumValue = enumClass.getDeclaredField(enumRef.name.toString).get(null)
  println(enumValue)                 // BAR
}
</code></pre></div></div>

<h2 id="printers">Printers</h2>

<p>Utilities for nicely printing
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Trees.html"><code class="highlighter-rouge">Trees</code></a> and
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Types.html"><code class="highlighter-rouge">Types</code></a>.</p>

<h3 id="printing-trees">Printing Trees</h3>

<p>The method <code class="highlighter-rouge">show</code> displays the “prettified” representation of reflection
artifacts. This representation provides one with the desugared Java
representation of Scala code. For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala&gt; def tree = reify { final class C { def x = 2 } }.tree
tree: scala.reflect.runtime.universe.Tree

scala&gt; show(tree)
res0: String =
{
  final class C extends AnyRef {
    def &lt;init&gt;() = {
      super.&lt;init&gt;();
      ()
    };
    def x = 2
  };
  ()
}
</code></pre></div></div>

<p>The method <code class="highlighter-rouge">showRaw</code> displays the internal structure of a given reflection
object as a Scala abstract syntax tree (AST), the representation that the
Scala typechecker operates on.</p>

<p>Note that while this representation appears to generate correct trees that one
might think would be possible to use in a macro implementation, this is not
usually the case. Symbols aren’t fully represented (only their names are).
Thus, this method is best-suited for use simply inspecting ASTs given some
valid Scala code.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; showRaw(tree)
res1: String = Block(List(
  ClassDef(Modifiers(FINAL), TypeName("C"), List(), Template(
    List(Ident(TypeName("AnyRef"))),
    emptyValDef,
    List(
      DefDef(Modifiers(), termNames.CONSTRUCTOR, List(), List(List()), TypeTree(),
        Block(List(
          Apply(Select(Super(This(typeNames.EMPTY), typeNames.EMPTY), termNames.CONSTRUCTOR), List())),
          Literal(Constant(())))),
      DefDef(Modifiers(), TermName("x"), List(), List(), TypeTree(),
        Literal(Constant(2))))))),
  Literal(Constant(())))
</code></pre></div></div>

<p>The method <code class="highlighter-rouge">showRaw</code> can also print <code class="highlighter-rouge">scala.reflect.api.Types</code> next to the artifacts being inspected.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; import scala.tools.reflect.ToolBox // requires scala-compiler.jar
import scala.tools.reflect.ToolBox

scala&gt; import scala.reflect.runtime.{currentMirror =&gt; cm}
import scala.reflect.runtime.{currentMirror=&gt;cm}

scala&gt; showRaw(cm.mkToolBox().typeCheck(tree), printTypes = true)
res2: String = Block[1](List(
  ClassDef[2](Modifiers(FINAL), TypeName("C"), List(), Template[3](
    List(Ident[4](TypeName("AnyRef"))),
    emptyValDef,
    List(
      DefDef[2](Modifiers(), termNames.CONSTRUCTOR, List(), List(List()), TypeTree[3](),
        Block[1](List(
          Apply[4](Select[5](Super[6](This[3](TypeName("C")), typeNames.EMPTY), ...))),
          Literal[1](Constant(())))),
      DefDef[2](Modifiers(), TermName("x"), List(), List(), TypeTree[7](),
        Literal[8](Constant(2))))))),
  Literal[1](Constant(())))
[1] TypeRef(ThisType(scala), scala.Unit, List())
[2] NoType
[3] TypeRef(NoPrefix, TypeName("C"), List())
[4] TypeRef(ThisType(java.lang), java.lang.Object, List())
[5] MethodType(List(), TypeRef(ThisType(java.lang), java.lang.Object, List()))
[6] SuperType(ThisType(TypeName("C")), TypeRef(... java.lang.Object ...))
[7] TypeRef(ThisType(scala), scala.Int, List())
[8] ConstantType(Constant(2))
</code></pre></div></div>

<h3 id="printing-types">Printing Types</h3>

<p>The method <code class="highlighter-rouge">show</code> can be used to produce a <em>readable</em> string representation of a type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; import scala.reflect.runtime.universe._
import scala.reflect.runtime.universe._

scala&gt; def tpe = typeOf[{ def x: Int; val y: List[Int] }]
tpe: scala.reflect.runtime.universe.Type

scala&gt; show(tpe)
res0: String = scala.AnyRef{def x: Int; val y: scala.List[Int]}
</code></pre></div></div>

<p>Like the method <code class="highlighter-rouge">showRaw</code> for <code class="highlighter-rouge">scala.reflect.api.Trees</code>, <code class="highlighter-rouge">showRaw</code> for
<code class="highlighter-rouge">scala.reflect.api.Types</code> provides a visualization of the Scala AST operated
on by the Scala typechecker.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; showRaw(tpe)
res1: String = RefinedType(
  List(TypeRef(ThisType(scala), TypeName("AnyRef"), List())),
  Scope(
    TermName("x"),
    TermName("y")))
</code></pre></div></div>

<p>The <code class="highlighter-rouge">showRaw</code> method also has named parameters <code class="highlighter-rouge">printIds</code> and <code class="highlighter-rouge">printKinds</code>,
both with default argument <code class="highlighter-rouge">false</code>. When passing <code class="highlighter-rouge">true</code> to these, <code class="highlighter-rouge">showRaw</code>
additionally shows the unique identifiers of symbols, as well as their kind
(package, type, method, getter, etc.).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>scala&gt; showRaw(tpe, printIds = true, printKinds = true)
res2: String = RefinedType(
  List(TypeRef(ThisType(scala#2043#PK), TypeName("AnyRef")#691#TPE, List())),
  Scope(
    TermName("x")#2540#METH,
    TermName("y")#2541#GET))
</code></pre></div></div>

<h2 id="positions">Positions</h2>

<p>Positions (instances of the
<a href="http://www.scala-lang.org/api/current/scala-reflect/scala/reflect/api/Position.html">Position</a> trait)
are used to track the origin of symbols and tree nodes. They are commonly used when
displaying warnings and errors, to indicate the incorrect point in the
program. Positions indicate a column and line in a source file (the offset
from the beginning of the source file is called its “point”, which is
sometimes less convenient to use). They also carry the content of the line
they refer to. Not all trees or symbols have a position; a missing position is
indicated using the <code class="highlighter-rouge">NoPosition</code> object.</p>

<p>Positions can refer either to only a single character in a source file, or to
a <em>range</em>. In the latter case, a <em>range position</em> is used (positions that are
not range positions are also called <em>offset positions</em>). Range positions have
in addition <code class="highlighter-rouge">start</code> and <code class="highlighter-rouge">end</code> offsets. The <code class="highlighter-rouge">start</code> and <code class="highlighter-rouge">end</code> offsets can be
“focussed” on using the <code class="highlighter-rouge">focusStart</code> and <code class="highlighter-rouge">focusEnd</code> methods which return
positions (when called on a position which is not a range position, they just
return <code class="highlighter-rouge">this</code>).</p>

<p>Positions can be compared using methods such as <code class="highlighter-rouge">precedes</code>, which holds if
both positions are defined (<em>i.e.,</em> the position is not <code class="highlighter-rouge">NoPosition</code>) and the
end point of <code class="highlighter-rouge">this</code> position is not larger than the start point of the given
position. In addition, range positions can be tested for inclusion (using
method <code class="highlighter-rouge">includes</code>) and overlapping (using method <code class="highlighter-rouge">overlaps</code>).</p>

<p>Range positions are either <em>transparent</em> or <em>opaque</em> (not transparent). The
fact whether a range position is opaque or not has an impact on its permitted
use, because trees containing range positions must satisfy the following
invariants:</p>

<ul>
  <li>A tree with an offset position never contains a child with a range position</li>
  <li>If the child of a tree with a range position also has a range position, then the child’s range is contained in the parent’s range.</li>
  <li>Opaque range positions of children of the same node are non-overlapping (this means their overlap is at most a single point).</li>
</ul>

<p>Using the <code class="highlighter-rouge">makeTransparent</code> method, an opaque range position can be converted
to a transparent one; all other positions are returned unchanged.</p>

				</div>

				<div class="content-contributors">
    <h3>Contributors to this page:</h3>
    <div id="contributors" class="contributors-container"></div>
</div>

			</div>
		</div>

		<!-- TOC -->
		<div class="content-nav">
	<div class="inner-box sidebar-toc-wrapper" style="">
		<h5 class="contents">Contents</h5>
		<div class="inner-toc" id="sidebar-toc">

      <ul>
        
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/overview.html">Overview</a></li>
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/environment-universes-mirrors.html">Environment, Universes, and Mirrors</a></li>
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/symbols-trees-types.html">Symbols, Trees, and Types</a></li>
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/annotations-names-scopes.html">Annotations, Names, Scopes, and More</a></li>
            
            <div id="toc"></div>
          
        
          
        
          
        
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/typetags-manifests.html">TypeTags and Manifests</a></li>
            
            
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/thread-safety.html">Thread Safety</a></li>
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
             <!-- this must be English, so get the other documents' titles -->
            <li><a href="/overviews/reflection/changelog211.html">Changes in Scala 2.11</a></li>
            
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>

      
        <ul id="available-languages" style="display: none;">
          <li><a href="/overviews/reflection/annotations-names-scopes.html">English</a></li>
          
            
            
      			
      			<li><a href="/ja/overviews/reflection/annotations-names-scopes.html" class="lang">日本語</a></li>
          
        </ul>
      
		</div>
		<hr>
		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/master/_overviews/reflection/annotations-names-scopes.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
	</div>
</div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="/getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="/overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.12/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="/scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="/resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>

<!-- moment js -->
<script src="/resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="/resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="/resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="/resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="/resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="/resources/js/vendor/jquery.sticky.js" type="text/javascript"></script>
<script src="/resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom javascript -->
<script src="/resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'fbc439670f5d4e3730cdcb715c359391',
indexName: 'scala-lang',
inputSelector: '#doc-search-bar',
algoliaOptions: { 'facetFilters': ["language:en"] },
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>

</html>

