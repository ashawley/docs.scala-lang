<!DOCTYPE html>
<html>
  <head>
    <title>SIP-36 - Adding prefix types | Scala Documentation</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" type="image/png" href="/docs.scala-lang/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/docs.scala-lang/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/docs.scala-lang/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/docs.scala-lang/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/docs.scala-lang/resources/favicon-16x16.png">
    <link rel="manifest" href="/docs.scala-lang/resources/site.webmanifest">
    <link rel="mask-icon" href="/docs.scala-lang/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="/docs.scala-lang/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="/docs.scala-lang/resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/docs.scala-lang/resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="/docs.scala-lang/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/docs.scala-lang/resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>


<div class="navigation-fade-screen"></div>

<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="/docs.scala-lang/resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="/docs.scala-lang/" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>
<header id="doc-header">
  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      <a href="/docs.scala-lang/" class="navigation-bdand">
        <img src="/docs.scala-lang/resources/img/documentation-logo@2x.png" alt="">
      </a>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="#" id="api" >API</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="https://www.scala-lang.org/api/current/">Current</a>
                  </li>
                
                  <li>
                    <a href="https://www.scala-lang.org/files/archive/nightly/2.12.x/api/2.12.x/">Nightly</a>
                  </li>
                
                  <li>
                    <a href="/docs.scala-lang/api/all.html">All Versions</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="/docs.scala-lang/getting-started.html">Getting Started</a>
                  </li>
                
                  <li>
                    <a href="/docs.scala-lang/tour/tour-of-scala.html">Tour of Scala</a>
                  </li>
                
                  <li>
                    <a href="/docs.scala-lang/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
                  </li>
                
                  <li>
                    <a href="/docs.scala-lang/learn.html">Online Resources</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="#" id="reference" >Reference</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="/docs.scala-lang/overviews/index.html">Guides & Overviews</a>
                  </li>
                
                  <li>
                    <a href="/docs.scala-lang/books.html">Books</a>
                  </li>
                
                  <li>
                    <a href="/docs.scala-lang/tutorials/FAQ/index.html">Scala FAQs</a>
                  </li>
                
                  <li>
                    <a href="http://scala-lang.org/files/archive/spec/2.12/">Language Spec</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/docs.scala-lang/style/index.html" id="style guide" >Style Guide</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/docs.scala-lang/cheatsheets/index.html" id="cheatsheet" >Cheatsheet</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/docs.scala-lang/glossary/index.html" id="glossary" >Glossary</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/docs.scala-lang/sips/index.html" id="sips" >SIPs</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="api" style="display: none;">
            
              <li>
                <a href="https://www.scala-lang.org/api/current/">Current</a>
              </li>
            
              <li>
                <a href="https://www.scala-lang.org/files/archive/nightly/2.12.x/api/2.12.x/">Nightly</a>
              </li>
            
              <li>
                <a href="/docs.scala-lang/api/all.html">All Versions</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="/docs.scala-lang/getting-started.html">Getting Started</a>
              </li>
            
              <li>
                <a href="/docs.scala-lang/tour/tour-of-scala.html">Tour of Scala</a>
              </li>
            
              <li>
                <a href="/docs.scala-lang/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
              </li>
            
              <li>
                <a href="/docs.scala-lang/learn.html">Online Resources</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="reference" style="display: none;">
            
              <li>
                <a href="/docs.scala-lang/overviews/index.html">Guides & Overviews</a>
              </li>
            
              <li>
                <a href="/docs.scala-lang/books.html">Books</a>
              </li>
            
              <li>
                <a href="/docs.scala-lang/tutorials/FAQ/index.html">Scala FAQs</a>
              </li>
            
              <li>
                <a href="http://scala-lang.org/files/archive/spec/2.12/">Language Spec</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="/docs.scala-lang/style/index.html">Style Guide</a></li>
          
        
          
            <li><a href="/docs.scala-lang/cheatsheets/index.html">Cheatsheet</a></li>
          
        
          
            <li><a href="/docs.scala-lang/glossary/index.html">Glossary</a></li>
          
        
          
            <li><a href="/docs.scala-lang/sips/index.html">SIPs</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">

  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        <div class="titles">
          
            <div class="supertitle">&nbsp;</div>
          
          <h1>SIP-36 - Adding prefix types</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box toc-context">
				<p><strong>By: Oron Port</strong></p>

<h2 id="history">History</h2>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>Version</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Oct 25th 2017</td>
      <td>Split prefix types from <a href="http://docs.scala-lang.org/sips/priority-based-infix-type-precedence.html">SIP33</a>, and emphasize motivation</td>
    </tr>
    <tr>
      <td>Nov 29th 2017</td>
      <td>Updated SIP according to feedback in the PR, and recent update to SIP23</td>
    </tr>
    <tr>
      <td>Dec 1st 2017</td>
      <td>Added another use-case for prefix type <code class="highlighter-rouge">~</code></td>
    </tr>
  </tbody>
</table>

<p>Your feedback is welcome! If you’re interested in discussing this proposal, head over to <a href="https://contributors.scala-lang.org/t/sip-nn-make-infix-type-alias-precedence-like-expression-operator-precedence/471">this</a> Scala Contributors thread and let me know what you think.</p>

<hr />

<h2 id="introduction">Introduction</h2>
<p>Currently scala supports unary prefix operators (<code class="highlighter-rouge">-</code>, <code class="highlighter-rouge">+</code>, <code class="highlighter-rouge">~</code>, <code class="highlighter-rouge">!</code>) for expressions (e.g., <code class="highlighter-rouge">def unary_-</code>) and does not support prefix types.  See the Scala specification <a href="http://scala-lang.org/files/archive/spec/2.12/06-expressions.html#prefix-operations">Prefix Operations</a> section.</p>

<p><strong>Prefix expression vs. prefix type example</strong>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">object</span> <span class="nc">PrefixExpression</span> <span class="o">{</span>
  <span class="k">case</span> <span class="k">class</span> <span class="nc">Nummy</span><span class="o">(</span><span class="n">expand</span> <span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">def</span> <span class="n">unary_-</span> <span class="k">:</span> <span class="kt">Nummy</span> <span class="o">=</span> <span class="nc">Nummy</span><span class="o">(</span><span class="n">s</span><span class="s">"-$this"</span><span class="o">)</span>
    <span class="k">def</span> <span class="n">unary_~</span> <span class="k">:</span> <span class="kt">Nummy</span> <span class="o">=</span> <span class="nc">Nummy</span><span class="o">(</span><span class="n">s</span><span class="s">"~$this"</span><span class="o">)</span>
    <span class="k">def</span> <span class="n">unary_!</span> <span class="k">:</span> <span class="kt">Nummy</span> <span class="o">=</span> <span class="nc">Nummy</span><span class="o">(</span><span class="n">s</span><span class="s">"!$this"</span><span class="o">)</span>
    <span class="k">def</span> <span class="n">unary_+</span> <span class="k">:</span> <span class="kt">Nummy</span> <span class="o">=</span> <span class="nc">Nummy</span><span class="o">(</span><span class="n">s</span><span class="s">"+$this"</span><span class="o">)</span>
  <span class="o">}</span>
  <span class="k">object</span> <span class="nc">N</span> <span class="k">extends</span> <span class="nc">Nummy</span><span class="o">(</span><span class="s">"N"</span><span class="o">)</span>
  <span class="k">val</span> <span class="n">n1</span> <span class="k">=</span> <span class="o">-</span><span class="n">N</span>
  <span class="k">val</span> <span class="n">n2</span> <span class="k">=</span> <span class="o">~</span><span class="n">N</span>
  <span class="k">val</span> <span class="n">n3</span> <span class="k">=</span> <span class="o">!</span><span class="n">N</span>
  <span class="k">val</span> <span class="n">n4</span> <span class="k">=</span> <span class="o">+</span><span class="n">N</span>
<span class="o">}</span>
<span class="k">object</span> <span class="nc">NonExistingPrefixTypes</span> <span class="o">{</span>
  <span class="k">trait</span> <span class="nc">unary_-</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="nc">trait</span> <span class="n">unary_~</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="k">trait</span> <span class="nc">unary_!</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="nc">trait</span> <span class="n">unary_+</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="k">trait</span> <span class="nc">N</span>
  <span class="k">type</span> <span class="kt">N1</span> <span class="o">=</span> <span class="o">-</span><span class="n">N</span> <span class="c1">//Not working
</span>  <span class="k">type</span> <span class="kt">N2</span> <span class="o">=</span> <span class="o">~</span><span class="n">N</span> <span class="c1">//Not working
</span>  <span class="k">type</span> <span class="kt">N3</span> <span class="o">=</span> <span class="o">!</span><span class="n">N</span> <span class="c1">//Not working
</span>  <span class="k">type</span> <span class="kt">N4</span> <span class="o">=</span> <span class="o">+</span><span class="n">N</span> <span class="c1">//Not working
</span><span class="o">}</span>
</code></pre></div></div>

<hr />

<h2 id="motivation">Motivation</h2>
<p>It is easier to reason about the language when mathematical and logical operations for both terms and types are expressed the same. The proposal is relevant solely for projects which utilize numeric literal type operations (supported by SIP23, which was not yet accepted into Lightbend Scala). However, the SIP’s implementation is very small and should have minor effect on compiler performance.</p>

<h3 id="motivating-examples">Motivating examples</h3>

<h4 id="splice-prefix-types-for-meta-programming">Splice prefix types for meta-programming</h4>
<p>A requirement for <code class="highlighter-rouge">unary_~</code> is described by Martin Odersky at <a href="https://gist.github.com/odersky/f91362f6d9c58cc1db53f3f443311140">this proposal</a>.</p>

<h4 id="singleton-ops-library-example">Singleton-ops library example</h4>

<p>The <a href="https://github.com/fthomas/singleton-ops">singleton-ops library</a> with <a href="https://github.com/typelevel/scala">Typelevel Scala</a> (which implemented <a href="http://docs.scala-lang.org/sips/pending/42.type.html">SIP-23</a>) enable developers to express literal type operations more intuitively.</p>

<p>Consider the following example, where <code class="highlighter-rouge">foo</code> has two equivalent implementations, one using types, while the other uses terms:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">singleton.ops._</span>

<span class="k">object</span> <span class="nc">PrefixExample</span> <span class="o">{</span>
  <span class="cm">/*
  We would much rather write the following to acheive more clarity and shorter code:
  type Foo[Cond1, Cond2, Num] = ITE[Cond1 &amp;&amp; !Cond2, -Num, Num]	
  */</span>
  <span class="k">type</span> <span class="kt">Foo</span><span class="o">[</span><span class="kt">Cond1</span>, <span class="kt">Cond2</span>, <span class="kt">Num</span><span class="o">]</span> <span class="k">=</span> <span class="nc">ITE</span><span class="o">[</span><span class="kt">Cond1</span> <span class="kt">&amp;&amp;</span> <span class="kt">!</span><span class="o">[</span><span class="kt">Cond2</span><span class="o">]</span>, <span class="kt">Negate</span><span class="o">[</span><span class="kt">Num</span><span class="o">]</span>, <span class="kt">Num</span><span class="o">]</span>
  <span class="c1">//foo executes typelevel operations by using singleton-ops
</span>  <span class="k">def</span> <span class="n">foo</span><span class="o">[</span><span class="kt">Cond1</span>, <span class="kt">Cond2</span>, <span class="kt">Num</span><span class="o">](</span><span class="k">implicit</span> <span class="n">f</span> <span class="k">:</span> <span class="kt">Foo</span><span class="o">[</span><span class="kt">Cond1</span>, <span class="kt">Cond2</span>, <span class="kt">Num</span><span class="o">])</span> <span class="k">:</span> <span class="kt">f.Out</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">value</span>
  <span class="c1">//foo executes term operations
</span>  <span class="k">def</span> <span class="n">foo</span><span class="o">(</span><span class="n">cond1</span> <span class="k">:</span> <span class="kt">Boolean</span><span class="o">,</span> <span class="n">cond2</span> <span class="k">:</span> <span class="kt">Boolean</span><span class="o">,</span> <span class="n">num</span> <span class="k">:</span> <span class="kt">Int</span><span class="o">)</span> <span class="k">:</span> <span class="kt">Int</span> <span class="o">=</span> 
    <span class="k">if</span> <span class="o">(</span><span class="n">cond1</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">cond2</span><span class="o">)</span> <span class="o">-</span><span class="n">num</span> <span class="k">else</span> <span class="n">num</span>
<span class="o">}</span>

<span class="k">import</span> <span class="nn">PrefixExample._</span>

<span class="n">foo</span><span class="o">[</span><span class="kt">true</span>, <span class="kt">false</span>, <span class="err">3</span><span class="o">]</span> <span class="c1">//returns -3
</span><span class="n">foo</span><span class="o">(</span><span class="kc">true</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="mi">3</span><span class="o">)</span> <span class="c1">//returns -3
</span></code></pre></div></div>

<p>Note: <code class="highlighter-rouge">type ![A]</code> is possible to define, but <code class="highlighter-rouge">type -[A]</code> is not due to collision with infix type parsing.</p>

<h4 id="dfiant-library-example">DFiant library example</h4>

<p>DFiant is a domain specific language for hardware description I (Oron) am developing. Hardware interfaces have a direction annotation (e.g., <code class="highlighter-rouge">vec : DFBits[8] &lt;&gt; IN</code>). Sometime interfaces have multiple ports, in different directions. E.g.:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">MyInterface</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">data</span> <span class="k">:</span> <span class="kt">DFBits</span><span class="o">[</span><span class="err">32</span><span class="o">]</span> <span class="o">&lt;&gt;</span> <span class="nc">IN</span>
  <span class="k">val</span> <span class="n">address</span> <span class="k">:</span> <span class="kt">DFBits</span><span class="o">[</span><span class="err">32</span><span class="o">]</span> <span class="o">&lt;&gt;</span> <span class="nc">OUT</span>
<span class="o">}</span>
</code></pre></div></div>

<p>To be able to use the same interface in reverse, we need the ability to easily express it as:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">MyReversableInterface</span><span class="o">[</span><span class="kt">D</span> <span class="k">&lt;:</span> <span class="kt">Direction</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">val</span> <span class="n">data</span> <span class="k">:</span> <span class="kt">DFBits</span><span class="o">[</span><span class="err">32</span><span class="o">]</span> <span class="o">&lt;&gt;</span> <span class="n">D</span>
  <span class="k">val</span> <span class="n">address</span> <span class="k">:</span> <span class="kt">DFBits</span><span class="o">[</span><span class="err">32</span><span class="o">]</span> <span class="o">&lt;&gt;</span> <span class="o">~</span><span class="n">D</span>
<span class="o">}</span>
</code></pre></div></div>

<p>An implicit conversion can then assure that <code class="highlighter-rouge">~IN</code> is translated to <code class="highlighter-rouge">OUT</code> and vice-versa.</p>

<p>Interfaces may possess dozens of ports, thus without prefix types can be quite cumbersome.</p>

<hr />

<h2 id="proposal">Proposal</h2>

<p>Add support for prefix types, which is equivalent to the prefix operations for expressions.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>PrefixType ::= [`-' | `+' | `~' | `!'] SimpleType
CompoundType ::= PrefixType
              |  AnnotType {with AnnotType} [Refinement]
              |  Refinement
</code></pre></div></div>

<hr />

<h2 id="implementation">Implementation</h2>

<p>A PR for this SIP is available at: <a href="https://github.com/scala/scala/pull/6148">https://github.com/scala/scala/pull/6148</a></p>

<hr />

<h3 id="interactions-with-other-language-features">Interactions with other language features</h3>

<h4 id="variance-annotation">Variance Annotation</h4>
<p>Variance annotation uses the <code class="highlighter-rouge">-</code> and <code class="highlighter-rouge">+</code> symbols to annotate contravariant and covariant subtyping, respectively. Introducing unary prefix types may lead to some developer confusion. However, such interaction is very unlikely to occur. E.g.:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">Negate</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="nc">trait</span> <span class="nc">Positive</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">type</span> <span class="kt">unary_-</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Negate</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">type</span> <span class="kt">unary_+</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Positive</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">trait</span> <span class="nc">Contravariant</span><span class="o">[</span><span class="kt">B</span>, <span class="kt">-A</span> <span class="k">&lt;:</span> <span class="kt">+B</span><span class="o">]</span> <span class="c1">//contravariant A subtype upper-bounded by Positive[B]
</span><span class="k">trait</span> <span class="nc">Covariant</span><span class="o">[</span><span class="kt">B</span>, <span class="kt">+A</span> <span class="k">&lt;:</span> <span class="kt">-B</span><span class="o">]</span> <span class="c1">//covariant A subtype upper-bounded by Negative[B]
</span></code></pre></div></div>

<h4 id="negative-literal-types">Negative Literal Types</h4>
<p>Negative literal types are annotated using the <code class="highlighter-rouge">-</code> symbol. This can lead to the following confusion:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">Negate</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="nc">type</span> <span class="n">unary_-</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">=</span> <span class="nc">Negate</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="k">trait</span> <span class="nc">MyTrait</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>

<span class="nc">type</span> <span class="nc">MinusFortyTwo</span> <span class="k">=</span> <span class="nc">MyTrait</span><span class="o">[</span><span class="kt">-</span><span class="err">42</span><span class="o">]</span>
<span class="k">type</span> <span class="kt">NegateFortyTwo</span> <span class="o">=</span> <span class="nc">MyTrait</span><span class="o">[</span><span class="kt">Negate</span><span class="o">[</span><span class="err">42</span><span class="o">]]</span>
</code></pre></div></div>

<p>The above example demonstrates a case of two types <code class="highlighter-rouge">MinusFortyTwo</code> and <code class="highlighter-rouge">NegateFortyTwo</code> which are different. They may be equivalent in view (implicit conversion between the two type instances), but they are not equal.</p>

<p>Note: It is not possible to annotate a positive literal type in Scala (checked both in TLS and Dotty):</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">val</span> <span class="n">a</span> <span class="k">:</span> <span class="err">42</span> <span class="o">=</span> <span class="o">+</span><span class="mi">42</span> <span class="c1">//works
</span><span class="k">val</span> <span class="n">b</span> <span class="k">:</span> <span class="kt">-</span><span class="err">42</span> <span class="o">=</span> <span class="o">-</span><span class="mi">42</span> <span class="c1">//works
</span><span class="k">val</span> <span class="n">c</span> <span class="k">:</span> <span class="kt">+</span><span class="err">42</span> <span class="o">=</span> <span class="mi">42</span> <span class="c1">//error: ';' expected but integer literal found
</span></code></pre></div></div>

<p>This means that if unary prefix types are added, then <code class="highlighter-rouge">+42</code> will be a type expansion of <code class="highlighter-rouge">unary_+[42]</code>.</p>

<p><strong>Related Issues</strong></p>
<ul>
  <li><a href="https://github.com/lampepfl/dotty/issues/2783">Dotty Issue #2783</a></li>
  <li><a href="https://github.com/typelevel/scala/issues/157">Typelevel Scala Issue #157</a> (Resolved in recent update to SIP23)</li>
</ul>

<p>Dotty’s implementation of literal types currently fail compilation when infix types interact with a negative literal type.</p>
<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="kt">~~</span><span class="err">[</span><span class="kt">A</span><span class="o">,</span> <span class="n">B</span><span class="err">]</span>
<span class="k">type</span> <span class="kt">good</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">~~</span> <span class="mi">2</span>
<span class="k">type</span> <span class="kt">bad</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">~~</span> <span class="o">-</span><span class="mi">2</span> <span class="c1">//Error:(9, 20) ';' expected but integer literal found.
</span><span class="k">type</span> <span class="kt">work_around</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">~~</span> <span class="o">(-</span><span class="mi">2</span><span class="o">)</span> <span class="c1">//Error in Dotty
</span></code></pre></div></div>
<hr />

<h3 id="bibliography">Bibliography</h3>
<p><a href="https://contributors.scala-lang.org/t/sip-nn-make-infix-type-alias-precedence-like-expression-operator-precedence/471">Scala Contributors</a></p>

<p><a href="https://groups.google.com/forum/#!topic/scala-sips/ARVf1RLDw9U">scala-sips</a></p>

			</div>
		</div>

		<!-- TOC -->
    <div class="content-nav">
    	<div class="inner-box sidebar-toc-wrapper sip-toc" style="">
      
        <h5 class="contents">SIP Committee Decision</h5>
         <div class="tag" style="background-color: #b58900">Pending</div>
           <p class="vote-text" style="color: #b58900">
             
           </p>
        
    		<h5 class="contents">SIP Contents</h5>
    		<div class="inner-toc" id="sidebar-toc">
          <div id="toc"></div>
    		</div>
    		<hr>
    		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/master/_sips/sips/2017-10-25-adding-prefix-types.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
    	</div>
    </div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="/docs.scala-lang/getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="/docs.scala-lang/overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.12/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="/docs.scala-lang/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="/docs.scala-lang/scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="/docs.scala-lang/resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>

<!-- moment js -->
<script src="/docs.scala-lang/resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="/docs.scala-lang/resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="/docs.scala-lang/resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="/docs.scala-lang/resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="/docs.scala-lang/resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="/docs.scala-lang/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="/docs.scala-lang/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="/docs.scala-lang/resources/js/vendor/jquery.sticky.js" type="text/javascript"></script>
<script src="/docs.scala-lang/resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="/docs.scala-lang/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom javascript -->
<script src="/docs.scala-lang/resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'fbc439670f5d4e3730cdcb715c359391',
indexName: 'scala-lang',
inputSelector: '#doc-search-bar',
algoliaOptions: { 'facetFilters': ["language:en"] },
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>

</html>

