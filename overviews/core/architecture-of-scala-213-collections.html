<!DOCTYPE html>
<html>
  <head>
    <title>The Architecture of Scala 2.13’s Collections | Scala Documentation</title>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="icon" type="image/png" href="/resources/favicon.ico">
    <link rel="shortcut icon" type="image/png" href="/resources/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="/resources/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/resources/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/resources/favicon-16x16.png">
    <link rel="manifest" href="/resources/site.webmanifest">
    <link rel="mask-icon" href="/resources/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#15a9ce">
    <meta name="theme-color" content="#ffffff">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">

    <!-- Custom stylesheet -->
    <link href="/resources/css/unslider-dots.css" rel="stylesheet" type="text/css">
    <link href="/resources/css/unslider.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="/resources/css/highlightjs.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/style.css" type="text/css" />
    <link rel="stylesheet" href="/resources/css/monospace.css" type="text/css" />

    <!-- Atom feeds -->
    <link rel="alternate" type="application/atom+xml" title="News Feed" href="http://scala-lang.org/feed/index.xml" />
    <link rel="alternate" type="application/atom+xml" title="Blog Feed" href="http://scala-lang.org/feed/blog.xml" />

    <!-- Algolia stylesheet -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />


  </head>
  <body>


<div class="navigation-fade-screen"></div>

<header id="site-header">
  <div class="wrap">
    <nav class="navigation" role="menu">
      <a href="http://scala-lang.org" class="navigation-bdand">
        <img src="/resources/img/frontpage/scala-logo-white@2x.png" alt="">
      </a>
      <div class="navigation-panel-button">
        <i class="fa fa-bars"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="/" class="active">Documentation</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/download/" >Download</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/community/" >Community</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://index.scala-lang.org" >Libraries</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/contribute/" >Contribute</a>
            </li>
        
            <li class="navigation-menu-item">
              <a href="https://www.scala-lang.org/blog/" >Blog</a>
            </li>
        
      </ul>
    </nav>
  </div>
</header>
<header id="doc-header">
  <div class="wrap" style="padding: 0px;">
    <nav class="doc-navigation" role="menu">
      <a href="/" class="navigation-bdand">
        <img src="/resources/img/documentation-logo@2x.png" alt="">
      </a>
      <div class="navigation-ellipsis">
        <i class="fa fa-ellipsis-v"></i>
      </div>
      <ul class="navigation-menu">
        
            <li class="navigation-menu-item">
              <a href="#" id="api" >API</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="https://www.scala-lang.org/api/current/">Current</a>
                  </li>
                
                  <li>
                    <a href="https://www.scala-lang.org/files/archive/nightly/2.12.x/api/2.12.x/">Nightly</a>
                  </li>
                
                  <li>
                    <a href="/api/all.html">All Versions</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="#" id="learn" >Learn</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="/getting-started.html">Getting Started</a>
                  </li>
                
                  <li>
                    <a href="/tour/tour-of-scala.html">Tour of Scala</a>
                  </li>
                
                  <li>
                    <a href="/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
                  </li>
                
                  <li>
                    <a href="/learn.html">Online Resources</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="#" id="reference" >Reference</a>
                
                <ul class="navigation-dropdown">
                
                  <li>
                    <a href="/overviews/index.html">Guides & Overviews</a>
                  </li>
                
                  <li>
                    <a href="/books.html">Books</a>
                  </li>
                
                  <li>
                    <a href="/tutorials/FAQ/index.html">Scala FAQs</a>
                  </li>
                
                  <li>
                    <a href="http://scala-lang.org/files/archive/spec/2.12/">Language Spec</a>
                  </li>
                
                </ul>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/style/index.html" id="style guide" >Style Guide</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/cheatsheets/index.html" id="cheatsheet" >Cheatsheet</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/glossary/index.html" id="glossary" >Glossary</a>
                
            </li>
        
            <li class="navigation-menu-item">
              <a href="/sips/index.html" id="sips" >SIPs</a>
                
            </li>
        
      </ul>
    </nav>
    <nav class="doc-navigation-submenus">
      
        
          <ul class="navigation-submenu" id="api" style="display: none;">
            
              <li>
                <a href="https://www.scala-lang.org/api/current/">Current</a>
              </li>
            
              <li>
                <a href="https://www.scala-lang.org/files/archive/nightly/2.12.x/api/2.12.x/">Nightly</a>
              </li>
            
              <li>
                <a href="/api/all.html">All Versions</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="learn" style="display: none;">
            
              <li>
                <a href="/getting-started.html">Getting Started</a>
              </li>
            
              <li>
                <a href="/tour/tour-of-scala.html">Tour of Scala</a>
              </li>
            
              <li>
                <a href="/tutorials/scala-for-java-programmers.html">Scala for Java Programmers</a>
              </li>
            
              <li>
                <a href="/learn.html">Online Resources</a>
              </li>
            
          </ul>
        
      
        
          <ul class="navigation-submenu" id="reference" style="display: none;">
            
              <li>
                <a href="/overviews/index.html">Guides & Overviews</a>
              </li>
            
              <li>
                <a href="/books.html">Books</a>
              </li>
            
              <li>
                <a href="/tutorials/FAQ/index.html">Scala FAQs</a>
              </li>
            
              <li>
                <a href="http://scala-lang.org/files/archive/spec/2.12/">Language Spec</a>
              </li>
            
          </ul>
        
      
        
      
        
      
        
      
        
      
      <ul class="navigation-submenu ellipsis-menu" style="display: none;">
        
          
        
          
        
          
        
          
            <li><a href="/style/index.html">Style Guide</a></li>
          
        
          
            <li><a href="/cheatsheets/index.html">Cheatsheet</a></li>
          
        
          
            <li><a href="/glossary/index.html">Glossary</a></li>
          
        
          
            <li><a href="/sips/index.html">SIPs</a></li>
          
        
      </ul>
    </nav>
  </div>
</header>


<main id="inner-main">

  <!-- Title -->
  <section class="title-page">
    <div class="wrap">
      <div class="content-title-documentation">
        <div class="titles">
          
            <div class="supertitle">&nbsp;</div>
          
          <h1>The Architecture of Scala 2.13’s Collections</h1>
        </div>
        <div class="language-dropdown">
          <div id="dd" class="wrapper-dropdown" tabindex="1">
            <span>Language</span>
              <ul class="dropdown"></ul>
          </div>
      </div>
    </div>
  </section>

  
  <section class="content">
	<div class="wrap">
		<div class="content-primary documentation">
			<div class="inner-box">
				<div class="toc-context">
					<p><strong>Julien Richard-Foy</strong></p>

<p>This document describes the architecture of the Scala collections
framework in detail. Compared to
<a href="/overviews/collections/introduction.html">the Collections Introduction</a> you
will find out more about the internal workings of the framework. You
will also learn how this architecture helps you define your own
collections in a few lines of code, while reusing the overwhelming
part of collection functionality from the framework.</p>

<p><a href="/overviews/collections/introduction.html">The Collections API</a>
contains a large number of collection
operations, which exist uniformly on many different collection
implementations. Implementing every collection operation anew for
every collection type would lead to an enormous amount of code, most
of which would be copied from somewhere else. Such code duplication
could lead to inconsistencies over time, when an operation is added or
modified in one part of the collection library but not in others. The
principal design objective of the collections framework is to
avoid any duplication, defining every operation in as few places as
possible. (Ideally, everything should be defined in one place only,
but there are a few exceptions where things needed to be redefined.)
The design approach was to implement most operations in collection
“templates” that can be flexibly inherited from individual base
classes and implementations.</p>

<p>More precisely, these templates address the following challenges:</p>

<ul>
  <li>some transformation operations return the same concrete collection
type (e.g. <code class="highlighter-rouge">filter</code>, called on a <code class="highlighter-rouge">List[Int]</code> returns a <code class="highlighter-rouge">List[Int]</code>),</li>
  <li>some transformation operations return the same concrete collection
type with a different type of elements (e.g. <code class="highlighter-rouge">map</code>, called on a
<code class="highlighter-rouge">List[Int]</code>, can return a <code class="highlighter-rouge">List[String]</code>),</li>
  <li>some collections have a single element type (e.g. <code class="highlighter-rouge">List[A]</code>), while
some others have two (e.g. <code class="highlighter-rouge">Map[K, V]</code>),</li>
  <li>some operations on collections return a different concrete collection
depending on the element type. For example, <code class="highlighter-rouge">map</code> called on a <code class="highlighter-rouge">Map</code>
returns a <code class="highlighter-rouge">Map</code> if the mapping function returns a key-value pair, but
otherwise returns an <code class="highlighter-rouge">Iterable</code>,</li>
  <li>transformation operations on some collections require additional
implicit parameters (e.g. <code class="highlighter-rouge">map</code> on <code class="highlighter-rouge">SortedSet</code> takes an implicit
<code class="highlighter-rouge">Ordering</code>),</li>
  <li>some collections are strict (e.g. <code class="highlighter-rouge">List</code>), while some others are
non-strict (e.g. <code class="highlighter-rouge">View</code> and <code class="highlighter-rouge">LazyList</code>).</li>
</ul>

<p>The following sections explain how the templates address these
challenges.</p>

<h2 id="factoring-out-common-operations">Factoring out common operations</h2>

<p>This section presents the variability found in collections, which has to
be abstracted over to define reusable operation implementations.</p>

<p>We can group collection operations into two categories:</p>

<ul>
  <li><strong>transformation</strong> operations, which return another collection (e.g.
<code class="highlighter-rouge">map</code>, <code class="highlighter-rouge">filter</code>, <code class="highlighter-rouge">zip</code>, …),</li>
  <li><strong>reduction</strong> operations, which return a single value (e.g. <code class="highlighter-rouge">isEmpty</code>,
<code class="highlighter-rouge">foldLeft</code>, <code class="highlighter-rouge">find</code>, …).</li>
</ul>

<p>Transformation operations are harder to implement in template traits
because we want them to return collection types that are unknown yet.
For instance, consider the signature of the <code class="highlighter-rouge">map</code> operation on <code class="highlighter-rouge">List[A]</code>
and <code class="highlighter-rouge">Vector[A]</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">Vector</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Vector</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>To generalize the type signature of <code class="highlighter-rouge">map</code> we have to abstract over
the resulting <em>collection type constructor</em>.</p>

<p>A slightly different example is <code class="highlighter-rouge">filter</code>. Consider its type signature on
<code class="highlighter-rouge">List[A]</code> and <code class="highlighter-rouge">Map[K, V]</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">filter</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">Map</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">filter</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="o">((</span><span class="kt">K</span><span class="o">,</span> <span class="kt">V</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>To generalize the type signature of <code class="highlighter-rouge">filter</code> we have to abstract
over the resulting <em>collection type</em>.</p>

<p>In summary, operations that change the elements type (<code class="highlighter-rouge">map</code>,
<code class="highlighter-rouge">flatMap</code>, <code class="highlighter-rouge">collect</code>, etc.) need to abstract over the resulting
collection type constructor, and operations that keep the same
elements type (<code class="highlighter-rouge">filter</code>, <code class="highlighter-rouge">take</code>, <code class="highlighter-rouge">drop</code>, etc.) need to abstract
over the resulting collection type.</p>

<h2 id="abstracting-over-collection-types">Abstracting over collection types</h2>

<p>The template trait <code class="highlighter-rouge">IterableOps</code> implements the operations available
on the <code class="highlighter-rouge">Iterable[A]</code> collection type.</p>

<p>Here is the header of trait <code class="highlighter-rouge">IterableOps</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">+A</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="o">{</span> <span class="err">…</span> <span class="o">}</span>
</code></pre></div></div>

<p>The type parameter <code class="highlighter-rouge">A</code> stands for the element type of the iterable,
the type parameter <code class="highlighter-rouge">CC</code> stands for the collection type constructor
and the type parameter <code class="highlighter-rouge">C</code> stands for the collection type.</p>

<p>This allows us to define the signature of <code class="highlighter-rouge">filter</code> and <code class="highlighter-rouge">map</code> like
so:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">+A</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">filter</span><span class="o">(</span><span class="n">p</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">C</span> <span class="o">=</span> <span class="err">…</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="err">…</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Leaf collection types appropriately instantiate the type
parameters. For instance, in the case of <code class="highlighter-rouge">List[A]</code> we want <code class="highlighter-rouge">CC</code> to
be <code class="highlighter-rouge">List</code> and <code class="highlighter-rouge">C</code> to be <code class="highlighter-rouge">List[A]</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">List</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="nc">extends</span> <span class="nc">Iterable</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="k">with</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">List</span>, <span class="kt">List</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
</code></pre></div></div>

<h2 id="four-branches-of-templates-traits">Four branches of templates traits</h2>

<p>The astute reader might have noticed that the given type signature
for the <code class="highlighter-rouge">map</code> operation doesn’t work with <code class="highlighter-rouge">Map</code> collections because
the <code class="highlighter-rouge">CC[_]</code> type parameter of the <code class="highlighter-rouge">IterableOps</code> trait takes one type
parameter whereas <code class="highlighter-rouge">Map[K, V]</code> takes two type parameters.</p>

<p>To support collection types constructors with two types parameters
we have another template trait named <code class="highlighter-rouge">MapOps</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">MapOps</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">+V</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span>, <span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="nc">extends</span> <span class="nc">IterableOps</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">)</span>, <span class="kt">Iterable</span>, <span class="kt">C</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="o">((</span><span class="kt">K</span><span class="o">,</span> <span class="kt">V</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">K2</span><span class="o">,</span> <span class="n">V2</span><span class="o">))</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">]</span> <span class="k">=</span> <span class="err">…</span>
<span class="o">}</span>
</code></pre></div></div>

<p>And then <code class="highlighter-rouge">Map[K, V]</code> can extend this trait and appropriately instantiate its
type parameters:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">Map</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">]</span> <span class="nc">extends</span> <span class="nc">Iterable</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">)]</span>
  <span class="k">with</span> <span class="nc">MapOps</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span>, <span class="kt">Map</span>, <span class="kt">Map</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">]]</span>
</code></pre></div></div>

<p>Note that the <code class="highlighter-rouge">MapOps</code> trait inherits from <code class="highlighter-rouge">IterableOps</code> so that operations
defined in <code class="highlighter-rouge">IterableOps</code> are also available in <code class="highlighter-rouge">MapOps</code>. Also note that
the collection type constructor passed to the <code class="highlighter-rouge">IterableOps</code> trait is
<code class="highlighter-rouge">Iterable</code>. This means that <code class="highlighter-rouge">Map[K, V]</code> inherits two overloads of the <code class="highlighter-rouge">map</code>
operation:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// from MapOps
</span><span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="o">((</span><span class="kt">K</span><span class="o">,</span> <span class="kt">V</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">K2</span><span class="o">,</span> <span class="n">V2</span><span class="o">))</span><span class="k">:</span> <span class="kt">Map</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">]</span>

<span class="c1">// from IterableOps
</span><span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="o">((</span><span class="kt">K</span><span class="o">,</span> <span class="kt">V</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
</code></pre></div></div>

<p>At use-site, when you call the <code class="highlighter-rouge">map</code> operation, the compiler selects one of
the two overloads. If the function passed as argument to <code class="highlighter-rouge">map</code> returns a pair,
both functions are applicable. In this case, the version from <code class="highlighter-rouge">MapOps</code> is used
because it is more specific by the rules of overloading resolution, so the
resulting collection is a <code class="highlighter-rouge">Map</code>. If the argument function does not return a pair,
only the version defined in <code class="highlighter-rouge">IterableOps</code> is applicable. In this case, the
resulting collection is an <code class="highlighter-rouge">Iterable</code>. This is how we follow the
“same-result-type” principle: wherever possible a transformation method on a
collection yields a collection of the same type.</p>

<p>In summary, the fact that <code class="highlighter-rouge">Map</code> collection types take two type parameters makes
it impossible to unify their transformation operations with the ones from
<code class="highlighter-rouge">IterableOps</code>, hence the specialized <code class="highlighter-rouge">MapOps</code> template trait.</p>

<p>There is another situation where the type signatures of the transformation
operations defined in <code class="highlighter-rouge">IterableOps</code> don’t match the type signature of a
more concrete collection type: <code class="highlighter-rouge">SortedSet[A]</code>. In that case the type
signature of the <code class="highlighter-rouge">map</code> operation is the following:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">ord</span><span class="k">:</span> <span class="kt">Ordering</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">SortedSet</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span>
</code></pre></div></div>

<p>The difference with the signature we have in <code class="highlighter-rouge">IterableOps</code> is that here
we need an implicit <code class="highlighter-rouge">Ordering</code> instance for the type of elements.</p>

<p>Like for <code class="highlighter-rouge">Map</code>, <code class="highlighter-rouge">SortedSet</code> needs a specialized template trait with
overloads for transformation operations:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">SortedSetOps</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="nc">extends</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">Set</span>, <span class="kt">C</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)(</span><span class="k">implicit</span> <span class="n">ord</span><span class="k">:</span> <span class="kt">Ordering</span><span class="o">[</span><span class="kt">B</span><span class="o">])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> <span class="err">…</span>

<span class="o">}</span>
</code></pre></div></div>

<p>And then collection types that inherit the <code class="highlighter-rouge">SortedSetOps</code> trait appropriately
instantiate its type parameters:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">SortedSet</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="nc">extends</span> <span class="nc">SortedSetOps</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">SortedSet</span>, <span class="kt">SortedSet</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
</code></pre></div></div>

<p>Last, there is a fourth kind of collection that requires a specialized template
trait: <code class="highlighter-rouge">SortedMap[K, V]</code>. This type of collection has two type parameters and
needs an implicit ordering instance on the type of keys. Therefore we have a
<code class="highlighter-rouge">SortedMapOps</code> template trait that provides the appropriate overloads.</p>

<p>In total, we’ve seen that we have four branches of template traits:</p>

<table>
  <thead>
    <tr>
      <th>kind</th>
      <th>not sorted</th>
      <th>sorted</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">CC[_]</code></td>
      <td><code class="highlighter-rouge">IterableOps</code></td>
      <td><code class="highlighter-rouge">SortedSetOps</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">CC[_, _]</code></td>
      <td><code class="highlighter-rouge">MapOps</code></td>
      <td><code class="highlighter-rouge">SortedMapOps</code></td>
    </tr>
  </tbody>
</table>

<p>Here is a diagram illustrating the architecture:</p>

<p><img src="/resources/images/collections-architecture.svg" alt="" /></p>

<p>Template traits are in grey whereas collection types are in white.</p>

<h2 id="strict-and-non-strict-collections">Strict and non-strict collections</h2>

<p>Another difference that has been taken into account in the design of the
collections framework is the fact that some collection types eagerly
evaluate their elements (e.g. <code class="highlighter-rouge">List</code>, <code class="highlighter-rouge">Set</code>, etc.), whereas others
delay their evaluation until the element is effectively accessed (e.g.
<code class="highlighter-rouge">LazyList</code> and <code class="highlighter-rouge">View</code>). The former category of collections is said to
be “strict”, whereas the latter is said to be “non-strict”.</p>

<p>Thus, the default implementation of transformation operations must
preserve the “strictness” of the concrete collection type that inherits
these implementations. For instance, we want the default <code class="highlighter-rouge">map</code> implementation
to be non-strict when inherited by a <code class="highlighter-rouge">View</code>, and strict when inherited
by a <code class="highlighter-rouge">List</code>.</p>

<p>To achieve that, operations are, by default, implemented in terms of a
non-strict <code class="highlighter-rouge">View</code>. For the record, a <code class="highlighter-rouge">View</code> “describes” an operation applied
to a collection but does not evaluate its result until the <code class="highlighter-rouge">View</code> is
effectively traversed. Here is the (simplified) definition of <code class="highlighter-rouge">View</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">View</span><span class="o">[</span><span class="kt">+A</span><span class="o">]</span> <span class="nc">extends</span> <span class="nc">Iterable</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span> <span class="k">with</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">View</span>, <span class="kt">View</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">iterator</span><span class="k">:</span> <span class="kt">Iterator</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>A <code class="highlighter-rouge">View</code> is an <code class="highlighter-rouge">Iterable</code> that has only one abstract method returning
an <code class="highlighter-rouge">Iterator</code> for traversing its elements. The <code class="highlighter-rouge">View</code> elements are
evaluated only when its <code class="highlighter-rouge">Iterator</code> is traversed.</p>

<h2 id="operations-implementation">Operations implementation</h2>

<p>Now that we are more familiar with the hierarchy of the template traits, we can have
a look at the actual implementation of some operations. Consider for instance the
implementations of <code class="highlighter-rouge">filter</code> and <code class="highlighter-rouge">map</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">+A</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">filter</span><span class="o">(</span><span class="n">pred</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="nc">Boolean</span><span class="o">)</span><span class="k">:</span> <span class="kt">C</span> <span class="o">=</span>
    <span class="n">fromSpecificIterable</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="nc">Filter</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">pred</span><span class="o">))</span>

  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">B</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="kt">A</span> <span class="o">=&gt;</span> <span class="n">B</span><span class="o">)</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">B</span><span class="o">]</span> <span class="k">=</span> 
    <span class="n">fromIterable</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="nc">Map</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">f</span><span class="o">))</span>

  <span class="k">protected</span> <span class="k">def</span> <span class="n">fromSpecificIterable</span><span class="o">(</span><span class="n">coll</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">C</span>
  <span class="k">protected</span> <span class="k">def</span> <span class="n">fromIterable</span><span class="o">[</span><span class="kt">E</span><span class="o">](</span><span class="n">it</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">E</span><span class="o">])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">E</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Let’s detail the implementation of <code class="highlighter-rouge">filter</code>, step by step:</p>

<ul>
  <li>the instantiation of <code class="highlighter-rouge">View.Filter</code> creates a (non-strict) <code class="highlighter-rouge">View</code> that filters the elements
of the underlying collection ;</li>
  <li>the call to <code class="highlighter-rouge">fromSpecificIterable</code> turns the <code class="highlighter-rouge">View</code> into a concrete
collection <code class="highlighter-rouge">C</code>. The implementation of <code class="highlighter-rouge">fromSpecificIterable</code> is left to
concrete collections: they can decide to evaluate in a strict or non-strict way
the elements resulting from the operation.</li>
</ul>

<p>The implementation of <code class="highlighter-rouge">map</code> is similar, excepted that instead of using
<code class="highlighter-rouge">fromSpecificIterable</code> it uses <code class="highlighter-rouge">fromIterable</code> which takes as parameter an
iterable whose element type <code class="highlighter-rouge">E</code> is arbitrary.</p>

<p>Actually, <code class="highlighter-rouge">fromIterable</code> is not abstract in <code class="highlighter-rouge">IterableOps</code>: it delegates to an
<code class="highlighter-rouge">iterableFactory</code> member (which is abstract):</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">+A</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">protected</span> <span class="k">def</span> <span class="n">fromIterable</span><span class="o">[</span><span class="kt">E</span><span class="o">](</span><span class="n">it</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">E</span><span class="o">])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">E</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">iterableFactory</span><span class="o">.</span><span class="n">from</span><span class="o">(</span><span class="n">it</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">iterableFactory</span><span class="k">:</span> <span class="kt">IterableFactory</span><span class="o">[</span><span class="kt">CC</span><span class="o">]</span>

<span class="o">}</span>
</code></pre></div></div>

<p>This <code class="highlighter-rouge">iterableFactory</code> member is implemented by concrete collections and typically
refer to their companion object, which provides factory methods to create concrete
collection instances. Here is an excerpt of the definition of <code class="highlighter-rouge">IterableFactory</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">IterableFactory</span><span class="o">[</span><span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">from</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">source</span><span class="k">:</span> <span class="kt">IterableOnce</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Last but not least, as explained in the above sections, since we have four branches
of template traits, we have four corresponding branches of factories. For instance,
here are the relevant parts of code of the <code class="highlighter-rouge">map</code> operation implementation in <code class="highlighter-rouge">Map</code>:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">MapOps</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">+V</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span>, <span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span>
  <span class="nc">extends</span> <span class="nc">IterableOps</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">)</span>, <span class="kt">Iterable</span>, <span class="kt">C</span><span class="o">]</span> <span class="o">{</span>

  <span class="k">def</span> <span class="n">map</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">](</span><span class="n">f</span><span class="k">:</span> <span class="o">((</span><span class="kt">K</span><span class="o">,</span> <span class="kt">V</span><span class="o">))</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="n">K2</span><span class="o">,</span> <span class="n">V2</span><span class="o">))</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">mapFromIterable</span><span class="o">(</span><span class="k">new</span> <span class="nc">View</span><span class="o">.</span><span class="nc">Map</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">f</span><span class="o">))</span>

  <span class="c1">// Similar to fromIterable, but returns a Map collection type
</span>  <span class="k">protected</span> <span class="k">def</span> <span class="n">mapFromIterable</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">](</span><span class="n">it</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[(</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">)])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">K2</span>, <span class="kt">V2</span><span class="o">]</span> <span class="k">=</span>
    <span class="n">mapFactory</span><span class="o">.</span><span class="n">from</span><span class="o">(</span><span class="n">it</span><span class="o">)</span>

  <span class="k">def</span> <span class="n">mapFactory</span><span class="k">:</span> <span class="kt">MapFactory</span><span class="o">[</span><span class="kt">CC</span><span class="o">]</span>

<span class="o">}</span>

<span class="k">trait</span> <span class="nc">MapFactory</span><span class="o">[</span><span class="kt">+CC</span><span class="o">[</span><span class="k">_</span>, <span class="k">_</span><span class="o">]]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">from</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">](</span><span class="n">it</span><span class="k">:</span> <span class="kt">IterableOnce</span><span class="o">[(</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">)])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">K</span>, <span class="kt">V</span><span class="o">]</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="when-a-strict-evaluation-is-preferable-or-unavoidable">When a strict evaluation is preferable (or unavoidable)</h2>

<p>In the previous sections we explained that the “strictness” of concrete collections
should be preserved by default operation implementations. However in some cases this
leads to less efficient implementations. For instance, <code class="highlighter-rouge">partition</code> has to perform
two traversals of the underlying collection. In some other case (e.g. <code class="highlighter-rouge">groupBy</code>) it
is simply not possible to implement the operation without evaluating the collection
elements.</p>

<p>For those cases, we also provide ways to implement operations in a strict mode.
The pattern is different: instead of being based on a <code class="highlighter-rouge">View</code>, it is based on a
<code class="highlighter-rouge">Builder</code>. Here is an outline of the <code class="highlighter-rouge">Builder</code> trait:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">package</span> <span class="nn">scala.collection.mutable</span>

<span class="k">trait</span> <span class="nc">Builder</span><span class="o">[</span><span class="kt">-A</span>, <span class="kt">+C</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">addOne</span><span class="o">(</span><span class="n">elem</span><span class="k">:</span> <span class="kt">A</span><span class="o">)</span><span class="k">:</span> <span class="kt">this.type</span>
  <span class="k">def</span> <span class="n">result</span><span class="o">()</span><span class="k">:</span> <span class="kt">C</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Builders are generic in both the element type <code class="highlighter-rouge">A</code> and the type of collection they
return, <code class="highlighter-rouge">C</code>.
You can add an element <code class="highlighter-rouge">x</code> to a builder <code class="highlighter-rouge">b</code> with <code class="highlighter-rouge">b.addOne(x)</code> (or <code class="highlighter-rouge">b += x</code>). The
<code class="highlighter-rouge">result()</code> method returns a collection from a builder.</p>

<p>By symmetry with <code class="highlighter-rouge">fromSpecificIterable</code> and <code class="highlighter-rouge">fromIterable</code>, template traits provide
ways to get a builder resulting in a collection with the same type of elements, and
to get a builder resulting in a collection of the same type but with a different
type of elements. The following code shows the relevant parts of <code class="highlighter-rouge">IterableOps</code> and
<code class="highlighter-rouge">IterableFactory</code> to build collections in both strict and non-strict modes:</p>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">trait</span> <span class="nc">IterableOps</span><span class="o">[</span><span class="kt">+A</span>, <span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]</span>, <span class="kt">+C</span><span class="o">]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">iterableFactory</span><span class="k">:</span> <span class="kt">IterableFactory</span><span class="o">[</span><span class="kt">CC</span><span class="o">]</span>
  <span class="k">protected</span> <span class="k">def</span> <span class="n">fromSpecificIterable</span><span class="o">(</span><span class="n">coll</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">C</span>
  <span class="k">protected</span> <span class="k">def</span> <span class="n">newSpecificBuilder</span><span class="k">:</span> <span class="kt">Builder</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">C</span><span class="o">]</span>
<span class="o">}</span>

<span class="k">trait</span> <span class="nc">IterableFactory</span><span class="o">[</span><span class="kt">+CC</span><span class="o">[</span><span class="k">_</span><span class="o">]]</span> <span class="o">{</span>
  <span class="k">def</span> <span class="n">from</span><span class="o">[</span><span class="kt">A</span><span class="o">](</span><span class="n">source</span><span class="k">:</span> <span class="kt">IterableOnce</span><span class="o">[</span><span class="kt">A</span><span class="o">])</span><span class="k">:</span> <span class="kt">CC</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span>
  <span class="k">def</span> <span class="n">newBuilder</span><span class="o">[</span><span class="kt">A</span><span class="o">]</span><span class="k">:</span> <span class="kt">Builder</span><span class="o">[</span><span class="kt">A</span>, <span class="kt">CC</span><span class="o">[</span><span class="kt">A</span><span class="o">]]</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Note that, in general, an operation that doesn’t <em>have to</em> be strict should
be implemented in a non-strict mode, otherwise it would lead to surprising
behaviour when used on a non-strict concrete collection (you can read more
about that statement in
<a href="https://www.scala-lang.org/blog/2017/11/28/view-based-collections.html">this article</a>).
That being said,
the strict mode is often more efficient. This is why we provide template
traits whose operation implementations have been overridden to take
advantage of strict builders. The name of these template traits always
starts with <code class="highlighter-rouge">StrictOptimized</code>. You should use such a template trait for
your custom collection if it is a strict collection.</p>

<h2 id="summary">Summary</h2>

<p>This document explains that:</p>
<ul>
  <li>collection operations are implemented in template traits suffixed
with <code class="highlighter-rouge">Ops</code> (e.g. <code class="highlighter-rouge">IterableOps[A, CC[_], C]</code>),</li>
  <li>these template traits abstract over the type of collection elements (<code class="highlighter-rouge">A</code>),
the type constructor of returned collections (<code class="highlighter-rouge">CC</code>) and the type of
returned collections (<code class="highlighter-rouge">C</code>),</li>
  <li>there are four branches of template traits (<code class="highlighter-rouge">IterableOps</code>, <code class="highlighter-rouge">MapOps</code>,
<code class="highlighter-rouge">SortedSetOps</code> and <code class="highlighter-rouge">SortedMapOps</code>),</li>
  <li>some transformation operations (e.g. <code class="highlighter-rouge">map</code>) are overloaded to return
different result types according to their arguments type,</li>
  <li>the logic of transformation operations is primarily implemented in
views but there are specialized versions of template traits
(prefixed with <code class="highlighter-rouge">StrictOptimized</code>) that override these operations
to use a builder based approach.</li>
</ul>

<p>You now have all the required knowledge to implement
<a href="/overviews/core/custom-collections.html">custom collection types</a>.</p>

				</div>

				<div class="content-contributors">
    <h3>Contributors to this page:</h3>
    <div id="contributors" class="contributors-container"></div>
</div>

			</div>
		</div>

		<!-- TOC -->
		<div class="content-nav">
	<div class="inner-box sidebar-toc-wrapper" style="">
		<h5 class="contents">Contents</h5>
		<div class="inner-toc" id="sidebar-toc">
      <div id="toc"></div>
      
		</div>
		<hr>
		<div class="help-us"><a href="https://github.com/scala/docs.scala-lang/blob/master/_overviews/core/architecture-of-scala-213-collections.md"><i class="fa fa-pencil" aria-hidden="true"></i> Problem with this page?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Please help us fix it!</a></div>
	</div>
</div>

	</div>
</section>


</main>

<footer id="site-footer">
    <div class="wrap">
      <div class="site-footer-top">
        
          <ul class="documentation">
            <li><h3>Documentation</h3></li>
            
              <li><a href="/getting-started.html">Getting Started</a></li>
            
              <li><a href="https://www.scala-lang.org/api/current/index.html">API</a></li>
            
              <li><a href="/overviews">Overviews/Guides</a></li>
            
              <li><a href="http://scala-lang.org/files/archive/spec/2.12/">Language Specification</a></li>
            
          </ul>
        
          <ul class="download">
            <li><h3>Download</h3></li>
            
              <li><a href="http://scala-lang.org/download/">Current Version</a></li>
            
              <li><a href="http://scala-lang.org/download/all.html">All versions</a></li>
            
          </ul>
        
          <ul class="community">
            <li><h3>Community</h3></li>
            
              <li><a href="http://scala-lang.org/community/">Community</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#mailing-lists">Mailing Lists</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#chat-rooms">Chat Rooms & More</a></li>
            
              <li><a href="http://scala-lang.org/community/index.html#community-libraries-and-tools">Libraries and Tools</a></li>
            
              <li><a href="http://scala.epfl.ch/">The Scala Center</a></li>
            
          </ul>
        
          <ul class="contribute">
            <li><h3>Contribute</h3></li>
            
              <li><a href="http://scala-lang.org/contribute/">How to help</a></li>
            
              <li><a href="http://scala-lang.org/contribute/bug-reporting-guide.html">Report an Issue</a></li>
            
          </ul>
        
          <ul class="scala">
            <li><h3>Scala</h3></li>
            
              <li><a href="http://scala-lang.org/blog/">Blog</a></li>
            
              <li><a href="http://scala-lang.org/conduct/">Code of Conduct</a></li>
            
              <li><a href="http://scala-lang.org/license/">License</a></li>
            
          </ul>
        
          <ul class="social">
            <li><h3>Social</h3></li>
            
              <li><a href="https://github.com/scala/scala">GitHub</a></li>
            
              <li><a href="https://twitter.com/scala_lang">Twitter</a></li>
            
          </ul>
        
      </div>
      <div class="site-footer-bottom">
        <p></p>
        <img src="/resources/img/frontpage/scala-logo-white.png" alt="">
      </div>
    </div>
    <a class="back-to-top in" href="#" id="scroll-to-top-btn">
      <i class="fa fa-angle-up"></i>
    </a>
</footer>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
<script>(window.jQuery) || document.write('<script src="/scripts/jquery-3.1.1.min.js"><\/script>');</script>
<script src="/resources/js/vendor/jquery.autocomplete.js" type="text/javascript"></script>

<!-- moment js -->
<script src="/resources/js/vendor/moment.min.js" type="text/javascript"></script>

<!-- tweet feed -->
<script src="/resources/js/tweetMachine-update.js" type="text/javascript"></script>

<!-- prettify js -->
<script src="/resources/js/vendor/prettify/prettify.js" type="text/javascript"></script>
<script src="/resources/js/vendor/prettify/lang-scala.js" type="text/javascript"></script>

<!-- unslider js -->
<script src="/resources/js/vendor/unslider.js" type="text/javascript"></script>

<!-- Highlight -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/highlight.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/scala.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.9.0/languages/java.min.js" type="text/javascript"></script>

<!-- CodeMirror -->
<script src="/resources/js/vendor/codemirror/codemirror.js" type="text/javascript"></script>
<script src="/resources/js/vendor/codemirror/clike.js" type="text/javascript"></script>

<!-- TOC -->
<script src="/resources/js/vendor/jquery.sticky.js" type="text/javascript"></script>
<script src="/resources/js/vendor/toc.js" type="text/javascript"></script>

<!-- Blog search -->
<script src="/resources/js/vendor/jekyll.search.min.js" type="text/javascript"></script>

<!-- Custom javascript -->
<script src="/resources/js/functions.js" type="text/javascript"></script>



<!-- Alogolia search for doc -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script type="text/javascript"> docsearch({
apiKey: 'fbc439670f5d4e3730cdcb715c359391',
indexName: 'scala-lang',
inputSelector: '#doc-search-bar',
algoliaOptions: { 'facetFilters': ["language:en"] },
debug: false // Set debug to true if you want to inspect the dropdown
});
</script>
</body>

</html>

